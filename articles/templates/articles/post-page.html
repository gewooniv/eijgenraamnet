{% extends "base.html" %}
{% load static %}

{% block title %}
    {{ post.title }} - Eijgenraam.net
{% endblock %}

{% block css_files %}
    <link rel='stylesheet' href="{% static 'articles/index.css' %}">
    <link rel='stylesheet' href="{% static 'articles/post-page.css' %}">
{% endblock %}

{% block content %}
    <section id='welcome'>
        <header>
            <img src="{{ post.header_image.url }}" alt="{{ post.title }}" />
            <h2>{{ post.title }}</h2>
        </header>
        <div class='author'>
            <address>{{ post.author }}</address>
            Last updated on <time>{{ post.date|date:'d M Y' }}</time>
        </div>
    </section>

    <main>
        <p>{{ post.content|safe }}</p> <!-- safe is for suppressing html tags in text -->
    </main>

    <section id='comment-form'>
        <h3>Geef een reactie:</h3>
        <form action='{% url 'post-page' post.slug %}' method='POST'>
            {% csrf_token %}
            {% for form_field in comment_form %}
                <div class='form-control'>
                    {{ form_field.label_tag }}
                    {{ form_field }}
                    {{ form_field.errors }}
                </div>
            {% endfor %}
            <button type='submit'>Verzend reactie</button>
        </form>
    </section>
    <section id='comment-form'>
        <div>
            {% for comment in all_comments %}
                <div class='form-control'>
                    {{ comment.username }}, {{ comment.date }}
                </div>
                <div>
                    {{ comment.text }}
                    {% empty %}
                    Geen reacties gevonden.
                </div>
            {% endfor %}         
        </div>
    </section>

    <section id='about'>
        <a href='/admin'>Admin login</a>
    </section>
{% endblock %}